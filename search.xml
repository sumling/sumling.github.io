<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Mysql数据库主从配置</title>
      <link href="/2023/120117446.html"/>
      <url>/2023/120117446.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>转自 <a href="https://blog.csdn.net/u013618714/article/details/131558487?spm=1001.2014.3001.5506">MySQL8.0主从部署配置详细步骤_mysql8主从配置_蜗牛大白牙的博客-CSDN博客</a></p></blockquote><h4 id="1、在两台服务器上安装mysql"><a href="#1、在两台服务器上安装mysql" class="headerlink" title="1、在两台服务器上安装mysql"></a>1、在两台服务器上安装mysql</h4><table><thead><tr><th>ip</th><th>角色</th></tr></thead><tbody><tr><td>192.168.10.129</td><td>主</td></tr><tr><td>192.168.10.130</td><td>从</td></tr></tbody></table><h4 id="2、主服务器修改my-cnf文件"><a href="#2、主服务器修改my-cnf文件" class="headerlink" title="2、主服务器修改my.cnf文件"></a>2、主服务器修改my.cnf文件</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">vi <span class="operator">/</span>etc<span class="operator">/</span>my.cnf</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#服务器 id，随意，但要唯一</span><br><span class="line">server<span class="operator">-</span>id<span class="operator">=</span><span class="number">1</span></span><br><span class="line">#二进制文件存放路径</span><br><span class="line">log<span class="operator">-</span>bin<span class="operator">=</span>mysql<span class="operator">-</span>bin</span><br><span class="line">#参数用于排除自带的数据库。  </span><br><span class="line">binlog<span class="operator">-</span>ignore<span class="operator">-</span>db<span class="operator">=</span>mysql</span><br><span class="line">binlog<span class="operator">-</span>ignore<span class="operator">-</span>db<span class="operator">=</span>information_schema</span><br><span class="line">binlog<span class="operator">-</span>ignore<span class="operator">-</span>db<span class="operator">=</span>performance_schema</span><br><span class="line">#二进制日志格式，建议使用<span class="type">ROW</span>格式以获得更好的兼容性和可靠性。</span><br><span class="line">binlog<span class="operator">-</span>format<span class="operator">=</span><span class="type">ROW</span></span><br></pre></td></tr></table></figure><h4 id="3、重启主服务器mysql"><a href="#3、重启主服务器mysql" class="headerlink" title="3、重启主服务器mysql"></a>3、重启主服务器mysql</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">service mysql restart</span><br></pre></td></tr></table></figure><h4 id="4、主服务器的数据库中创建用于复制的账户并授予相应的权限"><a href="#4、主服务器的数据库中创建用于复制的账户并授予相应的权限" class="headerlink" title="4、主服务器的数据库中创建用于复制的账户并授予相应的权限"></a>4、<strong>主服务器</strong>的数据库中创建用于复制的账户并授予相应的权限</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#登录mysql</span><br><span class="line">mysql <span class="operator">-</span>uroot <span class="operator">-</span>p</span><br><span class="line"></span><br><span class="line">use mysql;</span><br><span class="line">#创建用户</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;db_sync&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;Csdn@123&#x27;</span>;</span><br><span class="line">#授权账号复制权限</span><br><span class="line"><span class="keyword">GRANT</span> REPLICATION SLAVE <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;db_sync&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line">#刷新配置</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><h4 id="5、在主服务器上执行以下命令获取当前二进制日志文件的名称和位置"><a href="#5、在主服务器上执行以下命令获取当前二进制日志文件的名称和位置" class="headerlink" title="5、在主服务器上执行以下命令获取当前二进制日志文件的名称和位置"></a>5、在<strong>主服务器</strong>上执行以下命令获取当前二进制日志文件的名称和位置</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> MASTER STATUS;</span><br></pre></td></tr></table></figure><h5 id="记录File-和-Position-值，后续在从服务器上使用"><a href="#记录File-和-Position-值，后续在从服务器上使用" class="headerlink" title="记录File 和 Position 值，后续在从服务器上使用"></a>记录File 和 Position 值，后续在从服务器上使用</h5><p><img src="/pic/d.jpg"></p><h4 id="6、从服务器修改my-cnf文件"><a href="#6、从服务器修改my-cnf文件" class="headerlink" title="6、从服务器修改my.cnf文件"></a>6、从服务器修改my.cnf文件</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">server<span class="operator">-</span>id<span class="operator">=</span><span class="number">2</span></span><br><span class="line">#中继日志文件的名称，用于从主服务器接收二进制日志事件。</span><br><span class="line">relay<span class="operator">-</span>log<span class="operator">=</span>mysql<span class="operator">-</span>relay<span class="operator">-</span>bin</span><br><span class="line">#从服务器的二进制日志文件的名称。</span><br><span class="line">log_bin<span class="operator">=</span>mysql<span class="operator">-</span>bin</span><br><span class="line">#不同步相关的库</span><br><span class="line">replicate<span class="operator">-</span>ignore<span class="operator">-</span>db<span class="operator">=</span>mysql</span><br><span class="line">replicate<span class="operator">-</span>ignore<span class="operator">-</span>db<span class="operator">=</span>information_schema</span><br><span class="line">replicate<span class="operator">-</span>ignore<span class="operator">-</span>db<span class="operator">=</span>performance_schema</span><br></pre></td></tr></table></figure><h4 id="7、重启从服务器mysql"><a href="#7、重启从服务器mysql" class="headerlink" title="7、重启从服务器mysql"></a>7、重启从服务器mysql</h4><h4 id="8、登录从服务器mysql，根据主服务器信息执行以下命令"><a href="#8、登录从服务器mysql，根据主服务器信息执行以下命令" class="headerlink" title="8、登录从服务器mysql，根据主服务器信息执行以下命令"></a>8、登录从服务器mysql，根据主服务器信息执行以下命令</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#登录mysql</span><br><span class="line">mysql <span class="operator">-</span>uroot <span class="operator">-</span>p</span><br><span class="line"></span><br><span class="line">use mysql;</span><br><span class="line"></span><br><span class="line">CHANGE MASTER <span class="keyword">TO</span></span><br><span class="line"> MASTER_HOST <span class="operator">=</span> <span class="string">&#x27;192.168.10.129&#x27;</span>,    #主服务器ip</span><br><span class="line"> MASTER_USER <span class="operator">=</span> <span class="string">&#x27;db_sync&#x27;</span>,           #主服务器创建的复制账户</span><br><span class="line"> MASTER_PASSWORD <span class="operator">=</span> <span class="string">&#x27;Csdn@123&#x27;</span>,      #复制账户的密码</span><br><span class="line"> #主服务器数据库上的file值(不能有空格)</span><br><span class="line"> MASTER_LOG_FILE <span class="operator">=</span> <span class="string">&#x27;mysql-bin.000001&#x27;</span>,</span><br><span class="line"> #主服务器数据库的Position值</span><br><span class="line"> MASTER_LOG_POS <span class="operator">=</span> <span class="number">156</span>,</span><br><span class="line"> get_master_public_key<span class="operator">=</span><span class="number">1</span>;         #主服务器server<span class="operator">-</span>id</span><br><span class="line"> </span><br><span class="line">#开启同步</span><br><span class="line"><span class="keyword">start</span> slave;</span><br><span class="line"></span><br><span class="line">#查看同步状态</span><br><span class="line"><span class="keyword">SHOW</span> SLAVE STATUS\G;</span><br></pre></td></tr></table></figure><p><img src="/pic/e.jpg"></p><h5 id="Slave-IO-Running-和-Slave-SQL-Running-都为Yes，即配置成功"><a href="#Slave-IO-Running-和-Slave-SQL-Running-都为Yes，即配置成功" class="headerlink" title="Slave_IO_Running 和 Slave_SQL_Running 都为Yes，即配置成功"></a>Slave_IO_Running 和 Slave_SQL_Running 都为Yes，即配置成功</h5>]]></content>
      
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux安装Mysql8.0</title>
      <link href="/2023/112327003.html"/>
      <url>/2023/112327003.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>转自<a href="https://blog.csdn.net/u011421988/article/details/107234718?spm=1001.2014.3001.5506">linux 安装mysql8.0 超详细图文教程_linux mysql8 下载安装-CSDN博客</a></p></blockquote><h4 id="1、下载mysql安装包"><a href="#1、下载mysql安装包" class="headerlink" title="1、下载mysql安装包"></a>1、下载mysql安装包</h4><h4 id="2、切换到安装目录下"><a href="#2、切换到安装目录下" class="headerlink" title="2、切换到安装目录下"></a>2、切换到安装目录下</h4><h4 id="3、解压mysql"><a href="#3、解压mysql" class="headerlink" title="3、解压mysql"></a>3、解压mysql</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">tar xvJf mysql-<span class="number">8.0</span><span class="number">.26</span>-linux-glibc2<span class="number">.12</span>-x86_64.tar.xz</span><br></pre></td></tr></table></figure><h4 id="4、重命名mysql文件夹"><a href="#4、重命名mysql文件夹" class="headerlink" title="4、重命名mysql文件夹"></a>4、重命名mysql文件夹</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">mv mysql-<span class="number">8.0</span><span class="number">.26</span>-linux-glibc2<span class="number">.12</span>-x86_64 mysql8<span class="number">.0</span></span><br></pre></td></tr></table></figure><h4 id="5、进入mysql8-0文件夹，新建data文件夹"><a href="#5、进入mysql8-0文件夹，新建data文件夹" class="headerlink" title="5、进入mysql8.0文件夹，新建data文件夹"></a>5、进入mysql8.0文件夹，新建data文件夹</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">cd mysql8<span class="number">.0</span>/</span><br><span class="line">    </span><br><span class="line">mkdir data</span><br></pre></td></tr></table></figure><h4 id="6、创建用户组及用户密码"><a href="#6、创建用户组及用户密码" class="headerlink" title="6、创建用户组及用户密码"></a>6、创建用户组及用户密码</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">groupadd mysql</span><br><span class="line">    </span><br><span class="line">useradd -g mysql mysql</span><br></pre></td></tr></table></figure><h4 id="7、授权用户"><a href="#7、授权用户" class="headerlink" title="7、授权用户"></a>7、授权用户</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">chown -R mysql.mysql /home/mysql/mysql8<span class="number">.0</span></span><br></pre></td></tr></table></figure><h4 id="8、编辑my-cnf文件"><a href="#8、编辑my-cnf文件" class="headerlink" title="8、编辑my.cnf文件"></a>8、编辑my.cnf文件</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">vi <span class="operator">/</span>etc<span class="operator">/</span>my.cnf</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">basedir<span class="operator">=</span><span class="operator">/</span>home<span class="operator">/</span>mysql<span class="operator">/</span>mysql8<span class="number">.0</span><span class="operator">/</span></span><br><span class="line">datadir<span class="operator">=</span><span class="operator">/</span>home<span class="operator">/</span>mysql<span class="operator">/</span>mysql8<span class="number">.0</span><span class="operator">/</span>data<span class="operator">/</span></span><br><span class="line"><span class="type">character</span><span class="operator">-</span><span class="keyword">set</span><span class="operator">-</span>server<span class="operator">=</span>UTF8MB4</span><br><span class="line">socket<span class="operator">=</span><span class="operator">/</span>tmp<span class="operator">/</span>mysql.sock</span><br><span class="line">lower_case_table_names<span class="operator">=</span><span class="number">1</span>  #这里是设置大小写不敏感</span><br><span class="line"># Disabling symbolic<span class="operator">-</span>links <span class="keyword">is</span> recommended <span class="keyword">to</span> prevent assorted security risks</span><br><span class="line">symbolic<span class="operator">-</span>links<span class="operator">=</span><span class="number">0</span></span><br><span class="line"># Settings <span class="keyword">user</span> <span class="keyword">and</span> <span class="keyword">group</span> <span class="keyword">are</span> ignored <span class="keyword">when</span> systemd <span class="keyword">is</span> used.</span><br><span class="line"># If you need <span class="keyword">to</span> run mysqld under a different <span class="keyword">user</span> <span class="keyword">or</span> <span class="keyword">group</span>,</span><br><span class="line"># customize your systemd unit file <span class="keyword">for</span> mariadb according <span class="keyword">to</span> the</span><br><span class="line"># instructions <span class="keyword">in</span> http:<span class="operator">/</span><span class="operator">/</span>fedoraproject.org<span class="operator">/</span>wiki<span class="operator">/</span>Systemd</span><br><span class="line"></span><br><span class="line">#[mysqld_safe]</span><br><span class="line">#log<span class="operator">-</span>error<span class="operator">=</span><span class="operator">/</span>var<span class="operator">/</span>log<span class="operator">/</span>mariadb<span class="operator">/</span>mariadb.log</span><br><span class="line">#pid<span class="operator">-</span>file<span class="operator">=</span><span class="operator">/</span>var<span class="operator">/</span>run<span class="operator">/</span>mariadb<span class="operator">/</span>mariadb.pid</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># include <span class="keyword">all</span> files <span class="keyword">from</span> the config directory</span><br><span class="line">#</span><br></pre></td></tr></table></figure><h4 id="9、初始化，获取初始密码"><a href="#9、初始化，获取初始密码" class="headerlink" title="9、初始化，获取初始密码"></a>9、初始化，获取初始密码</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">cd <span class="operator">/</span>home<span class="operator">/</span>mysql<span class="operator">/</span>mysql8<span class="number">.0</span><span class="operator">/</span>bin</span><br><span class="line"></span><br><span class="line">.<span class="operator">/</span>mysqld <span class="comment">--user=mysql --basedir=/home/mysql/mysql8.0  --datadir=/home/mysql/mysql8.0/data/ --initialize --lower-case-table-names=1</span></span><br></pre></td></tr></table></figure><p><img src="/pic/a.jpg"></p><h4 id="10、返回安装目录，添加mysqld服务到系统，授权以及添加服务"><a href="#10、返回安装目录，添加mysqld服务到系统，授权以及添加服务" class="headerlink" title="10、返回安装目录，添加mysqld服务到系统，授权以及添加服务"></a>10、返回安装目录，添加mysqld服务到系统，授权以及添加服务</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">cd <span class="operator">/</span>home<span class="operator">/</span>mysql<span class="operator">/</span>mysql8<span class="number">.0</span></span><br><span class="line"></span><br><span class="line">cp <span class="operator">-</span>a .<span class="operator">/</span>support<span class="operator">-</span>files<span class="operator">/</span>mysql.server <span class="operator">/</span>etc<span class="operator">/</span>init.d<span class="operator">/</span>mysql</span><br><span class="line"></span><br><span class="line">chmod <span class="operator">+</span>x <span class="operator">/</span>etc<span class="operator">/</span>init.d<span class="operator">/</span>mysql</span><br><span class="line"> </span><br><span class="line">chkconfig <span class="comment">--add mysql</span></span><br></pre></td></tr></table></figure><h4 id="11、启动mysql"><a href="#11、启动mysql" class="headerlink" title="11、启动mysql"></a>11、启动mysql</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">service mysql <span class="keyword">start</span></span><br></pre></td></tr></table></figure><h4 id="12、将mysql命令添加到服务"><a href="#12、将mysql命令添加到服务" class="headerlink" title="12、将mysql命令添加到服务"></a>12、将mysql命令添加到服务</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">ln <span class="operator">-</span>s <span class="operator">/</span>home<span class="operator">/</span>mysql<span class="operator">/</span>mysql8<span class="number">.0</span><span class="operator">/</span>bin<span class="operator">/</span>mysql <span class="operator">/</span>usr<span class="operator">/</span>bin</span><br></pre></td></tr></table></figure><h4 id="13、使用初始密码登录mysql"><a href="#13、使用初始密码登录mysql" class="headerlink" title="13、使用初始密码登录mysql"></a>13、使用初始密码登录mysql</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql <span class="operator">-</span>uroot <span class="operator">-</span>p</span><br></pre></td></tr></table></figure><p><img src="/pic/b.jpg"></p><h4 id="14、设置新密码"><a href="#14、设置新密码" class="headerlink" title="14、设置新密码"></a>14、设置新密码</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">&#x27;sumling@123&#x27;</span>;#sumling<span class="variable">@123</span>为新密码</span><br><span class="line"></span><br><span class="line">flush privileges;   #重新加载是密码生效</span><br></pre></td></tr></table></figure><h4 id="15、修改远程连接"><a href="#15、修改远程连接" class="headerlink" title="15、修改远程连接"></a>15、修改远程连接</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">use mysql;</span><br><span class="line"></span><br><span class="line">update user set host=&#x27;%&#x27; where user=&#x27;root&#x27;;</span><br><span class="line"> </span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><h4 id="至此安装结束"><a href="#至此安装结束" class="headerlink" title="至此安装结束"></a>至此安装结束</h4>]]></content>
      
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
